<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>글쓰기</title>
    <script src="logo.js"></script>
    <style>
        textarea {
            /* border:none; */
            resize:none;
            width:700px;
        }
        #title{
            overflow:hidden;
            font-size: 30px;
        }
    </style>
</head>
<body>
    <h1 onclick="logo()">회사이름</h1>
    <hr>
    <form id="postform">
        <textarea id="title" maxlength="20" rows="1" placeholder="제목"></textarea>
        <hr>
        <textarea id="content"  rows="30" placeholder="글을 입력하십시오."></textarea>
        <p></p>
        <input type="submit" value="제출">
    </form>
</body>
<script type="module">
    import { addDoc, collection, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
    import { db } from "./app.js";
    document.getElementById("title").addEventListener('keydown', function(e){
        if (e.key == 'Enter'){
            e.preventDefault();
        }
    })
    document.getElementById("postform").addEventListener("submit", async(e) => {
        e.preventDefault();

        const title = document.getElementById("title").value;
        const content = document.getElementById("content").value;

        await addDoc(collection(db, "posts"), {
            title,
            content,
            createdAt: serverTimestamp()
        });

        alert("저장됨");

    });
    // document.getElementById("title").addEventListener('input', function(){
    //     if (this.value.length >30){
    //         this.value = this.value.slice(30);
    //     }
    // })
</script>
</html>