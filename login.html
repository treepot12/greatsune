<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>그레잇썬주식회사</title>
    <script src="logo.js"></script>
</head>
<body>
    <h1 onclick="logo()">그레잇썬주식회사</h1>
    <h3>로그인</h3>
    <form id="logf">
        <p><input id="id" type="password" placeholder="아이디"></p>
        <p><input id="pw" type="password" placeholder="비밀번호"></p>
        <p><input id="lo" type="submit" value="로그인"></p><p onclick="clubjoin()">회원가입</p>
    </form>
</body>
<script type="module">
    import { db } from "./app.js";
    import { getDocs, collection, query, where } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
    import { login } from "./loged.js";
    
    document.getElementById("logf").addEventListener("submit", async(e) => {
        e.preventDefault();

        const lid = document.getElementById("id").value;
        const lpw = document.getElementById("pw").value;
        const q = query(
            collection(db, "login"),
            where("id","==",lid),
            where("pw","==",lpw)
        );
        const snapshot = await getDocs(q);
        if (!snapshot.empty) {
            login();
            location.href="https://treepot12.github.io/greatsune/";
        }
        else {
            alert("잘못된 패스워드입니다.");
        }
            
            
        });
</script>
</html>